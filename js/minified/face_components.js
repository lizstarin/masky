function setFaceComponent(t,e){this.image=t,this.x=e[0]-origin[0],this.y=e[1]-origin[1]}function Nose(t){this.image=t,this.x=0,this.y=0,this.w=this.image.width/2,this.h=this.image.height/2}function Eye(t){var e=t?points.leftEyeHeight:points.rightEyeHeight,i=t?points.leftEyeCenter:points.rightEyeCenter,s=Math.abs(e)>18?1.3*e:e;this.x=i[0]-origin[0],this.y=i[1]-origin[1],this.w=40,this.h=s}function LeftEyebrow(t){setFaceComponent.call(this,t,points.leftEyebrow),this.w=this.image.width/8,this.h=this.image.height/8}function RightEyebrow(t){setFaceComponent.call(this,t,points.rightEyebrow),this.w=this.image.width/8,this.h=this.image.height/8}function UpperLip(t){var e=points.mouthWidth>100?1.5*points.mouthWidth:points.mouthWidth;setFaceComponent.call(this,t,points.upperLipCenter),this.w=e,this.h=this.image.height}function LowerLip(t){var e=points.mouthWidth>100?1.5*points.mouthWidth:points.mouthWidth;setFaceComponent.call(this,t,points.lowerLipCenter),this.w=e,this.h=this.image.height}function readTextFile(t){var e=new XMLHttpRequest;e.open("GET",t),e.onreadystatechange=function(){if(4===e.readyState&&(200===e.status||0==e.status)){var t=e.responseText.trim(),i=t.split("\n");loadImages(i)}},e.send(null)}function camelize(t){return t.replace(/(\-|_|\s)+(.)?/g,function(t,e,i){return i?i.toUpperCase():""})}function loadImages(t){t.forEach(function(t){var e=camelize(t).slice(0,-4),i=e.indexOf("1")>-1?"face-component selected ":"face-component ",s="assets/"+t;window[e]=loadImage(s);var n=findComponentType(s),o=createDiv("<img src = "+s+">");o.parent("sidebar"),o.class(i+n),o.attribute("component-type",n),o.elt.addEventListener("click",selectComponent)}),initializeSelections()}function selectComponent(){var t=this.getAttribute("component-type"),e=this.parentNode.getElementsByClassName("selected face-component "+t);this!=e&&(e.length>0&&e[0].classList.remove("selected"),this.classList.add("selected"),setSelection(this,t))}function initializeSelections(){selections={noseSelection:nose1,upperLipSelection:upperLip1,lowerLipSelection:lowerLip1,leftEyebrowSelection:leftEyebrow1,rightEyebrowSelection:rightEyebrow1}}function setSelection(t,e){var i=camelize(e)+"Selection",s=t.getElementsByTagName("img")[0].src,n=camelize(s.split("/").pop().slice(0,-4));selections[i]=window[n]}function findComponentType(t){var e=t.toLowerCase();return e.indexOf("nose")>-1?"nose":e.indexOf("eye")>-1&&-1==e.indexOf("eyebrow")?"eye":e.indexOf("upper_lip")>-1?"upper_lip":e.indexOf("lower_lip")>-1?"lower_lip":e.indexOf("left_eyebrow")>-1?"left_eyebrow":e.indexOf("right_eyebrow")>-1?"right_eyebrow":""}Nose.prototype.draw=function(){image(this.image,this.x-this.w/2,this.y-2*this.h/3,this.w,this.h)},Eye.prototype.draw=function(){fill(255),ellipse(this.x,this.y,this.w,this.h),fill(0),ellipse(this.x,this.y,10,10)},LeftEyebrow.prototype.draw=function(){image(this.image,this.x-this.w/2,this.y-this.h/2,this.w,this.h)},RightEyebrow.prototype.draw=function(){image(this.image,this.x-this.w/2,this.y-this.h/2,this.w,this.h)},UpperLip.prototype.draw=function(){image(this.image,this.x-this.w/2,this.y,this.w,this.h)},LowerLip.prototype.draw=function(){image(this.image,this.x-this.w/2,this.y+this.h/2,this.w,this.h)};